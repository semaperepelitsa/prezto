#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

alias mkcd='mkdcd'
alias tlog='tail -f log/development.log'
alias git="noglob git"
alias bower='noglob bower'

function tloga {
  tail -f ~/Library/Logs/Pow/apps/$1.log
}

eval "$(rbenv init - --no-rehash zsh)"

function c {
  cd ~/Code/$1
  local ruby_prefix=$(ruby -e 'print RbConfig::CONFIG["RUBY_BASE_NAME"], "/", RbConfig::CONFIG["ruby_version"]')
  local bundle_dir="$PWD/.bundle/$ruby_prefix"
  if [[ -d $bundle_dir ]]; then
    echo "Using local gems"

    export GEM_HOME=$bundle_dir
    path=($GEM_HOME/bin $path)
  fi
}

_c() { _files -W ~/Code -/; }
compdef _c c

function rst {
  touch tmp/restart.txt
}
